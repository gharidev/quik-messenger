(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d217ed6"],{c98b:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-main",[r("v-container",[r("h1",[t._v("Chats")]),t._l(t.chats,(function(e){return r("p",{key:e.id,on:{click:function(r){return t.openChat(e)}}},[t._v(" "+t._s(e.id+", "+t.getUserNameFromId(e.id))+" ")])})),r("users",{attrs:{chats:t.chats}})],2)],1)},s=[],u=(r("d81d"),r("4de4"),r("159b"),r("caad"),r("2532"),r("17e1")),c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h1",[t._v("Users")]),t._l(t.filteredUsers,(function(e){return r("p",{key:e.uid,on:{click:function(r){return t.startChat(e)}}},[t._v(" "+t._s(e.uid+", "+e.displayName)+" ")])}))],2)},i=[],o={data:function(){return{users:[]}},props:["chats"],computed:{currentUser:function(){return this.$store.getters.currentUser},filteredUsers:function(){var t=this;return this.users.filter((function(e){return e.uid!=t.currentUser.uid}))}},methods:{startChat:function(t){var e=this;if(t.uid!=this.currentUser.uid){var r=this.chats.filter((function(e){return e.users.includes(t.id)}));0==r.length?u["d"].collection("chats").add({users:[this.currentUser.uid,t.uid],personal:!0,messages:[],created:u["b"].now()}).then((function(t){e.$router.push("/chat/"+t.id)})):this.$router.push("/chat/"+r[0].id)}}},firestore:{users:u["d"].collection("users")},created:function(){console.log(this.currentUser)}},a=o,h=r("2877"),d=Object(h["a"])(a,c,i,!1,null,null,null),l=d.exports,f={data:function(){return{chats:null,chatUsers:{}}},components:{Users:l},computed:{currentUser:function(){return this.$store.getters.currentUser}},watch:{chats:function(t){var e=this,r=t.map((function(t){return console.log("Chat",t),t.users.filter((function(t){return t!=e.currentUser.uid}))[0]})),n={};console.log(r),0!=r.length&&u["d"].collection("users").where("uid","in",r).get().then((function(r){r.docs.forEach((function(r){t.forEach((function(t){t.users.includes(r.data().uid)&&(n[t.id]=r.data())})),e.chatUsers=n,console.log("Chat Users",n)}))}))}},methods:{getUserNameFromId:function(t){var e;return null===(e=this.chatUsers[t])||void 0===e?void 0:e.displayName},openChat:function(t){this.$router.push("/chat/"+t.id)}},created:function(){this.chats||this.$bind("chats",u["d"].collection("chats").where("users","array-contains",this.currentUser.uid))}},p=f,U=r("6544"),v=r.n(U),m=r("a523"),g=r("f6c4"),_=Object(h["a"])(p,n,s,!1,null,null,null);e["default"]=_.exports;v()(_,{VContainer:m["a"],VMain:g["a"]})}}]);
//# sourceMappingURL=chunk-2d217ed6.ad7323f2.js.map